<html>
<head>
    <title>animalese_js</title>
</head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="lz-string-1.3.3-min.js"></script>
<script src="riffwave.js"></script>
<script>
var load = function() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/animalese.wav');
    xhr.responseType = 'arraybuffer';
    xhr.onload = function(e) {
        var audio = new Audio();
        var wave = new RIFFWAVE();
        var data_array = new Uint8Array(this.response);
        var data = [];
        for (var i = 44; i < data_array.length; i++) {
            data[i-44] = data_array[i];
        }
        document.getElementById("text").value = data.length;

        wave.header.sampleRate = 44100;
        wave.header.numChannels = 1;
        wave.Make(data);
        audio.src = wave.dataURI;
        audio.play();
    }
    xhr.send();
}
</script>
<body>
    <p>Testing</p>
    <textarea id="text" rows"4" cols="50">Testing out the Animalese subsystem...</textarea>
    <button type="button" onclick="load()">Animalese</button>
</body>
</html>
